# PlayArea å’Œ AreaUpgradeManager å…³ç³»è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

`PlayArea` å’Œ `AreaUpgradeManager` æ˜¯ä¸¤ä¸ªç›¸äº’é…åˆçš„ç»„ä»¶ï¼Œå…±åŒç®¡ç†æ¸¸æˆåœºåœ°çš„æ˜¾ç¤ºå’Œå‡çº§ã€‚

---

## ğŸ”— å…³ç³»å›¾

```
AreaUpgradeManager (ç®¡ç†å™¨)
    â†“ æ§åˆ¶
PlayArea (æ‰§è¡Œè€…)
    â†“ æ˜¾ç¤º
åœºåœ° Sprite (ç¾æœ¯ç´ æ)
```

---

## ğŸ¯ ç»„ä»¶èŒè´£

### 1. **PlayArea** (åœºåœ°åŸºç¡€ç»„ä»¶)

**èŒè´£**ï¼š
- âœ… å®šä¹‰åœºåœ°çš„**è¾¹ç•Œ**ï¼ˆå¤§å°ã€ä¸­å¿ƒä½ç½®ï¼‰
- âœ… **æ˜¾ç¤º**åœºåœ°çš„ç¾æœ¯ç´ æï¼ˆSpriteï¼‰
- âœ… æä¾›è¾¹ç•Œæ£€æµ‹å’Œä½ç½®é™åˆ¶åŠŸèƒ½
- âœ… ç®¡ç† SpriteRenderer çš„æ˜¾ç¤º

**ç‰¹ç‚¹**ï¼š
- å•ä¾‹æ¨¡å¼ï¼š`PlayArea.Instance`
- å¯ä»¥åœ¨ Inspector ä¸­ç›´æ¥é…ç½®åˆå§‹å€¼
- æä¾›åŸºç¡€çš„åœºåœ°åŠŸèƒ½

### 2. **AreaUpgradeManager** (åœºåœ°å‡çº§ç®¡ç†å™¨)

**èŒè´£**ï¼š
- âœ… ç®¡ç†**å¤šä¸ªåœºåœ°ç­‰çº§**ï¼ˆé€šè¿‡ `AreaDataList`ï¼‰
- âœ… **æ£€æµ‹**ä½•æ—¶éœ€è¦å‡çº§åœºåœ°ï¼ˆé¸¡æ•°é‡æº¢å‡ºï¼‰
- âœ… **æ§åˆ¶** PlayArea çš„æ˜¾ç¤ºï¼ˆè°ƒç”¨ `PlayArea.UpdateAreaSettings()`ï¼‰
- âœ… ä¿å­˜å’ŒåŠ è½½åœºåœ°ç­‰çº§ï¼ˆæ°¸ä¹…å‡çº§ï¼‰

**ç‰¹ç‚¹**ï¼š
- å•ä¾‹æ¨¡å¼ï¼š`AreaUpgradeManager.Instance`
- åœ¨ `Start()` æ—¶è‡ªåŠ¨åº”ç”¨ç¬¬ä¸€ä¸ªåœºåœ°ï¼ˆç­‰çº§ 0ï¼‰
- å½“åœºåœ°å‡çº§æ—¶ï¼Œä¼šè¦†ç›– PlayArea çš„è®¾ç½®

---

## ğŸ”„ å·¥ä½œæµç¨‹

### åœºæ™¯ 1ï¼šæ¸¸æˆå¯åŠ¨æ—¶

```
1. PlayArea.Awake()
   â””â”€> åˆå§‹åŒ–åœºåœ°ï¼ˆä½¿ç”¨ Inspector ä¸­çš„åˆå§‹å€¼ï¼‰
   â””â”€> æ˜¾ç¤ºåˆå§‹ç¾æœ¯ç´ æï¼ˆå¦‚æœè®¾ç½®äº†ï¼‰

2. AreaUpgradeManager.Start()
   â””â”€> åŠ è½½åœºåœ°ç­‰çº§ï¼ˆé»˜è®¤ç­‰çº§ 0ï¼‰
   â””â”€> åº”ç”¨ç¬¬ä¸€ä¸ª AreaDataï¼ˆareaDataList[0]ï¼‰
   â””â”€> è°ƒç”¨ PlayArea.UpdateAreaSettings()
       â””â”€> è¦†ç›– PlayArea çš„åˆå§‹è®¾ç½®
       â””â”€> æ˜¾ç¤º AreaData ä¸­çš„ Sprite
```

**ç»“æœ**ï¼šå¦‚æœ `AreaUpgradeManager` å­˜åœ¨ï¼Œå®ƒä¼š**è¦†ç›–** `PlayArea` çš„åˆå§‹è®¾ç½®ã€‚

### åœºæ™¯ 2ï¼šåœºåœ°å‡çº§æ—¶

```
1. AreaUpgradeManager.Update()
   â””â”€> æ£€æµ‹é¸¡æ•°é‡æ˜¯å¦æº¢å‡º
   â””â”€> å¦‚æœæº¢å‡ºï¼Œè°ƒç”¨ UpgradeToNextArea()
       â””â”€> å‡çº§åˆ°ä¸‹ä¸€ä¸ª AreaData
       â””â”€> è°ƒç”¨ PlayArea.UpdateAreaSettings()
           â””â”€> æ›´æ–°åœºåœ°å¤§å°ã€ä¸­å¿ƒã€Sprite
```

**ç»“æœ**ï¼šåœºåœ°ä¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªç­‰çº§çš„é…ç½®ã€‚

---

## âš ï¸ é‡è¦åŒºåˆ«

### PlayArea ä¸­çš„ç¾æœ¯ç´ æ

**ä½ç½®**ï¼š`PlayArea` ç»„ä»¶çš„ Inspector ä¸­
- `Area Sprite` å­—æ®µ

**ç”¨é€”**ï¼š
- âœ… **åˆå§‹é»˜è®¤å€¼**ï¼ˆå¦‚æœ `AreaUpgradeManager` ä¸å­˜åœ¨ï¼‰
- âœ… **å ä½ç¬¦**ï¼ˆå¦‚æœ `AreaUpgradeManager` å­˜åœ¨ï¼Œä½†ç¬¬ä¸€ä¸ª `AreaData` æ²¡æœ‰è®¾ç½® Spriteï¼‰
- âš ï¸ **ä¼šè¢«è¦†ç›–**ï¼ˆå¦‚æœ `AreaUpgradeManager` å­˜åœ¨ä¸”ç¬¬ä¸€ä¸ª `AreaData` æœ‰ Spriteï¼‰

**ä½•æ—¶ä½¿ç”¨**ï¼š
- å¦‚æœ**ä¸ä½¿ç”¨**åœºåœ°å‡çº§ç³»ç»Ÿï¼Œç›´æ¥åœ¨ `PlayArea` ä¸­è®¾ç½® Sprite
- å¦‚æœ**ä½¿ç”¨**åœºåœ°å‡çº§ç³»ç»Ÿï¼Œ`PlayArea` ä¸­çš„ Sprite ä¼šè¢« `AreaUpgradeManager` çš„ç¬¬ä¸€ä¸ª `AreaData` è¦†ç›–

### AreaUpgradeManager ä¸­ç¬¬ä¸€ä¸ª AreaDataList

**ä½ç½®**ï¼š`AreaUpgradeManager` ç»„ä»¶çš„ Inspector ä¸­
- `Area Data List` æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆç´¢å¼• 0ï¼‰

**ç”¨é€”**ï¼š
- âœ… **ç¬¬ä¸€ä¸ªåœºåœ°ç­‰çº§**çš„é…ç½®ï¼ˆç­‰çº§ 0ï¼‰
- âœ… æ¸¸æˆå¯åŠ¨æ—¶**è‡ªåŠ¨åº”ç”¨**
- âœ… åŒ…å«ï¼šåœºåœ°å¤§å°ã€ä¸­å¿ƒã€èƒŒæ™¯ Spriteã€å‡çº§é˜ˆå€¼ç­‰

**ä½•æ—¶ä½¿ç”¨**ï¼š
- å¦‚æœ**ä½¿ç”¨**åœºåœ°å‡çº§ç³»ç»Ÿï¼Œè¿™æ˜¯**å¿…é¡»é…ç½®**çš„
- è¿™æ˜¯ç©å®¶çœ‹åˆ°çš„**ç¬¬ä¸€ä¸ªåœºåœ°**

---

## ğŸ“Š é…ç½®å»ºè®®

### æ–¹æ¡ˆ 1ï¼šä¸ä½¿ç”¨åœºåœ°å‡çº§ç³»ç»Ÿ

**é…ç½®**ï¼š
1. âœ… åˆ›å»º `PlayArea` GameObject
2. âœ… æ·»åŠ  `PlayArea` ç»„ä»¶
3. âœ… åœ¨ `PlayArea` ä¸­è®¾ç½® `Area Sprite`
4. âŒ **ä¸éœ€è¦** `AreaUpgradeManager`

**ç»“æœ**ï¼š
- åœºåœ°ä½¿ç”¨ `PlayArea` ä¸­çš„é…ç½®
- åœºåœ°ä¸ä¼šå‡çº§
- ç®€å•ç›´æ¥

### æ–¹æ¡ˆ 2ï¼šä½¿ç”¨åœºåœ°å‡çº§ç³»ç»Ÿï¼ˆæ¨èï¼‰

**é…ç½®**ï¼š
1. âœ… åˆ›å»º `PlayArea` GameObject
2. âœ… æ·»åŠ  `PlayArea` ç»„ä»¶
3. âœ… åˆ›å»º `AreaUpgradeManager` GameObject
4. âœ… æ·»åŠ  `AreaUpgradeManager` ç»„ä»¶
5. âœ… åˆ›å»º `AreaData` ScriptableObjectï¼ˆå³é”® > Create > ProjectChicken > Area Dataï¼‰
6. âœ… é…ç½®ç¬¬ä¸€ä¸ª `AreaData`ï¼š
   - è®¾ç½® `Area Size`ï¼ˆä¾‹å¦‚ï¼š10x10ï¼‰
   - è®¾ç½® `Area Center`ï¼ˆä¾‹å¦‚ï¼š0, 0ï¼‰
   - è®¾ç½® `Background Sprite`ï¼ˆæ‹–å…¥åœºåœ°å›¾ç‰‡ï¼‰
   - è®¾ç½® `Chicken Count Threshold`ï¼ˆä¾‹å¦‚ï¼š10ï¼‰
7. âœ… å°† `AreaData` æ‹–å…¥ `AreaUpgradeManager` çš„ `Area Data List`ï¼ˆç¬¬ä¸€ä¸ªä½ç½®ï¼‰

**ç»“æœ**ï¼š
- æ¸¸æˆå¯åŠ¨æ—¶ï¼Œ`AreaUpgradeManager` ä¼šåº”ç”¨ç¬¬ä¸€ä¸ª `AreaData`
- `PlayArea` ä¸­çš„åˆå§‹è®¾ç½®ä¼šè¢«è¦†ç›–
- å½“é¸¡æ•°é‡æº¢å‡ºæ—¶ï¼Œåœºåœ°ä¼šè‡ªåŠ¨å‡çº§åˆ°ä¸‹ä¸€ä¸ªç­‰çº§

---

## ğŸ” ä¼˜å…ˆçº§è§„åˆ™

### å¦‚æœ AreaUpgradeManager å­˜åœ¨ï¼š

```
ä¼˜å…ˆçº§ï¼šAreaUpgradeManager çš„ç¬¬ä¸€ä¸ª AreaData > PlayArea çš„åˆå§‹è®¾ç½®
```

**è¯´æ˜**ï¼š
- `AreaUpgradeManager` åœ¨ `Start()` æ—¶ä¼šè°ƒç”¨ `PlayArea.UpdateAreaSettings()`
- è¿™ä¼š**è¦†ç›–** `PlayArea` åœ¨ Inspector ä¸­è®¾ç½®çš„åˆå§‹å€¼
- æ‰€ä»¥ `PlayArea` ä¸­çš„ `Area Sprite` ä¼šè¢«ç¬¬ä¸€ä¸ª `AreaData` çš„ `Background Sprite` è¦†ç›–

### å¦‚æœ AreaUpgradeManager ä¸å­˜åœ¨ï¼š

```
ä¼˜å…ˆçº§ï¼šPlayArea çš„åˆå§‹è®¾ç½®
```

**è¯´æ˜**ï¼š
- `PlayArea` ä½¿ç”¨è‡ªå·±åœ¨ Inspector ä¸­è®¾ç½®çš„åˆå§‹å€¼
- åœºåœ°ä¸ä¼šå‡çº§

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. **ç»Ÿä¸€ç®¡ç†**

å¦‚æœä½¿ç”¨åœºåœ°å‡çº§ç³»ç»Ÿï¼Œå»ºè®®ï¼š
- âœ… åœ¨ `AreaUpgradeManager` çš„ `AreaDataList` ä¸­é…ç½®æ‰€æœ‰åœºåœ°
- âœ… `PlayArea` ä¸­çš„åˆå§‹è®¾ç½®å¯ä»¥ç•™ç©ºï¼ˆä¼šè¢«è¦†ç›–ï¼‰
- âœ… æˆ–è€…å°† `PlayArea` çš„åˆå§‹è®¾ç½®ä½œä¸º**å ä½ç¬¦**ï¼ˆå¦‚æœç¬¬ä¸€ä¸ª `AreaData` æ²¡æœ‰ Spriteï¼‰

### 2. **ç¬¬ä¸€ä¸ª AreaData é…ç½®**

ç¬¬ä¸€ä¸ª `AreaData`ï¼ˆç­‰çº§ 0ï¼‰åº”è¯¥ï¼š
- âœ… è®¾ç½®ä¸ `PlayArea` åˆå§‹å€¼ç›¸åŒçš„å¤§å°å’Œä¸­å¿ƒï¼ˆå¦‚æœéœ€è¦ï¼‰
- âœ… è®¾ç½®ç¬¬ä¸€ä¸ªåœºåœ°çš„èƒŒæ™¯ Sprite
- âœ… è®¾ç½®åˆç†çš„å‡çº§é˜ˆå€¼

### 3. **è°ƒè¯•**

å¦‚æœåœºåœ°ä¸æ˜¾ç¤ºï¼Œæ£€æŸ¥ï¼š
1. `AreaUpgradeManager` æ˜¯å¦å­˜åœ¨ï¼Ÿ
   - å¦‚æœå­˜åœ¨ï¼Œæ£€æŸ¥ç¬¬ä¸€ä¸ª `AreaData` çš„ `Background Sprite` æ˜¯å¦è®¾ç½®
2. `PlayArea` çš„ `Area Sprite` æ˜¯å¦è®¾ç½®ï¼Ÿ
   - å¦‚æœ `AreaUpgradeManager` å­˜åœ¨ï¼Œè¿™ä¸ªä¼šè¢«è¦†ç›–
3. ä½¿ç”¨ `PlayArea` çš„ "è¯Šæ–­åœºåœ°é…ç½®" åŠŸèƒ½æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

---

## ğŸ“ æ€»ç»“

| é¡¹ç›® | PlayArea ä¸­çš„ç¾æœ¯ç´ æ | AreaUpgradeManager ç¬¬ä¸€ä¸ª AreaData |
|------|---------------------|----------------------------------|
| **ç”¨é€”** | åˆå§‹é»˜è®¤å€¼/å ä½ç¬¦ | ç¬¬ä¸€ä¸ªåœºåœ°ç­‰çº§çš„é…ç½® |
| **ä¼˜å…ˆçº§** | ä½ï¼ˆå¦‚æœ AreaUpgradeManager å­˜åœ¨ï¼‰ | é«˜ï¼ˆä¼šè¦†ç›– PlayAreaï¼‰ |
| **ä½•æ—¶ä½¿ç”¨** | ä¸ä½¿ç”¨å‡çº§ç³»ç»Ÿæ—¶ | ä½¿ç”¨å‡çº§ç³»ç»Ÿæ—¶ï¼ˆå¿…é¡»ï¼‰ |
| **æ˜¯å¦ä¼šè¢«è¦†ç›–** | âœ… æ˜¯ï¼ˆå¦‚æœ AreaUpgradeManager å­˜åœ¨ï¼‰ | âŒ å¦ï¼ˆè¿™æ˜¯æ§åˆ¶è€…ï¼‰ |

**æ ¸å¿ƒå…³ç³»**ï¼š
- `AreaUpgradeManager` æ˜¯**ç®¡ç†è€…**ï¼Œæ§åˆ¶ `PlayArea` çš„æ˜¾ç¤º
- `PlayArea` æ˜¯**æ‰§è¡Œè€…**ï¼Œè´Ÿè´£å®é™…çš„æ˜¾ç¤ºå’Œè¾¹ç•Œæ£€æµ‹
- å¦‚æœä¸¤è€…éƒ½å­˜åœ¨ï¼Œ`AreaUpgradeManager` çš„é…ç½®ä¼š**è¦†ç›–** `PlayArea` çš„åˆå§‹è®¾ç½®
