# 金蛋美术素材替换说明

## 概述

现在 `EggProjectile` 组件支持使用自定义 Sprite 来替换金蛋的美术素材，而不仅仅是改变颜色。

## 功能说明

### 修改内容

1. **添加了美术素材字段**：
   - `normalEggSprite`：普通蛋的 Sprite（可选）
   - `goldenEggSprite`：金蛋的 Sprite（可选）

2. **智能切换逻辑**：
   - 如果指定了 `goldenEggSprite`，金蛋会使用该 Sprite，颜色保持白色（显示原始颜色）
   - 如果没有指定 `goldenEggSprite`，金蛋会使用颜色变化（黄色），保持向后兼容
   - 如果指定了 `normalEggSprite`，普通蛋会使用该 Sprite

## 配置步骤

### 方法一：在预制体上配置（推荐）

1. **找到鸡蛋预制体**：
   - 在 Project 窗口中找到 `EggProjectile` 预制体
   - 或者在 Hierarchy 中找到使用 `EggProjectile` 组件的 GameObject

2. **选择预制体/GameObject**：
   - 在 Inspector 中查看 `EggProjectile` 组件

3. **配置美术素材**：
   - 展开 "美术素材" 部分
   - **Golden Egg Sprite**：将你的金蛋 Sprite 拖入此字段
   - **Normal Egg Sprite**（可选）：如果需要，也可以为普通蛋指定 Sprite

4. **保存预制体**：
   - 如果修改的是预制体，点击 Inspector 顶部的 "Apply" 按钮保存更改

### 方法二：在场景中的实例上配置

1. **找到场景中的鸡蛋对象**：
   - 在 Hierarchy 中找到包含 `EggProjectile` 组件的 GameObject

2. **配置美术素材**：
   - 在 Inspector 中查看 `EggProjectile` 组件
   - 将金蛋 Sprite 拖入 "Golden Egg Sprite" 字段

3. **注意**：
   - 如果场景中的对象是从预制体实例化的，建议在预制体上配置，这样所有实例都会使用新的素材

## 工作流程

### 金蛋显示逻辑

1. **初始化时**：
   - `GameManager.SpawnEgg()` 检测到金鸡时，会传递 `golden = true` 给 `EggProjectile.Initialize()`

2. **视觉设置**：
   - 如果 `goldenEggSprite` 不为空：
     - 使用 `goldenEggSprite` 替换 Sprite
     - 颜色设置为白色（`Color.white`），显示 Sprite 的原始颜色
   - 如果 `goldenEggSprite` 为空：
     - 保持当前 Sprite 不变
     - 颜色设置为黄色（`Color.yellow`），向后兼容旧行为

### 普通蛋显示逻辑

1. **如果指定了 `normalEggSprite`**：
   - 使用 `normalEggSprite` 替换 Sprite
   - 颜色设置为白色

2. **如果没有指定 `normalEggSprite`**：
   - 保持默认 Sprite（预制体上设置的 Sprite）
   - 颜色设置为白色

## 示例配置

### 场景 1：只替换金蛋素材

```
EggProjectile 组件：
├─ 移动配置
│  ├─ Move Speed: 5
│  └─ Arrival Distance: 0.1
└─ 美术素材
   ├─ Normal Egg Sprite: (空，使用默认)
   └─ Golden Egg Sprite: [你的金蛋 Sprite]
```

### 场景 2：同时替换普通蛋和金蛋素材

```
EggProjectile 组件：
├─ 移动配置
│  ├─ Move Speed: 5
│  └─ Arrival Distance: 0.1
└─ 美术素材
   ├─ Normal Egg Sprite: [你的普通蛋 Sprite]
   └─ Golden Egg Sprite: [你的金蛋 Sprite]
```

## 注意事项

1. **Sprite 导入设置**：
   - 确保你的 Sprite 在 Unity 中正确导入
   - 建议使用 2D Sprite 类型
   - 检查 Sprite 的 Pixels Per Unit 设置，确保大小合适

2. **向后兼容**：
   - 如果不设置 `goldenEggSprite`，金蛋仍然会使用黄色显示（旧行为）
   - 这样可以逐步迁移，不需要一次性替换所有素材

3. **性能考虑**：
   - Sprite 切换在初始化时执行一次，不会影响运行时性能
   - 建议使用相同尺寸的 Sprite，避免不必要的缩放

4. **预制体应用**：
   - 如果修改了预制体实例，记得点击 "Apply" 保存到预制体
   - 这样所有使用该预制体的地方都会更新

## 测试建议

1. **测试金蛋显示**：
   - 确保有金鸡生成（可以通过技能提升金鸡生成率）
   - 观察金鸡下蛋时，是否显示你设置的金蛋 Sprite

2. **测试普通蛋显示**：
   - 观察普通鸡下蛋时，是否显示正确的 Sprite

3. **测试颜色**：
   - 如果设置了 `goldenEggSprite`，金蛋应该显示 Sprite 的原始颜色（不是黄色）
   - 如果没有设置 `goldenEggSprite`，金蛋应该显示为黄色

## 故障排除

### 问题 1：金蛋没有显示自定义 Sprite

**可能原因**：
- `goldenEggSprite` 字段未设置
- Sprite 导入设置不正确

**解决方法**：
- 检查 Inspector 中 `goldenEggSprite` 字段是否已赋值
- 检查 Sprite 是否正确导入为 2D Sprite 类型

### 问题 2：金蛋显示为白色而不是金色

**说明**：
- 这是正常行为！如果设置了 `goldenEggSprite`，金蛋会使用 Sprite 的原始颜色
- 如果你希望金蛋显示为金色，有两种方法：
  1. 不设置 `goldenEggSprite`，使用颜色变化（黄色）
  2. 在美术素材中制作金色的金蛋 Sprite

### 问题 3：修改后没有生效

**可能原因**：
- 修改的是预制体实例，但没有应用到预制体
- 场景中使用了不同的预制体实例

**解决方法**：
- 如果修改的是实例，点击 Inspector 顶部的 "Apply" 按钮
- 检查场景中使用的预制体是否正确

## 相关文件

- `Assets/Scripts/Systems/EggProjectile.cs`：鸡蛋投射物脚本
- `Assets/Scripts/Core/GameManager.cs`：游戏管理器（生成鸡蛋）
- `Assets/Scripts/Units/ChickenUnit.cs`：鸡单位脚本（判断是否为金鸡）

## 更新日志

- **2024-XX-XX**：添加了 `goldenEggSprite` 和 `normalEggSprite` 字段，支持使用自定义 Sprite 替换金蛋和普通蛋的美术素材

